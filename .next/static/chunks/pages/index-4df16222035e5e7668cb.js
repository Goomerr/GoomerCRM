(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5709:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(3564),i=n(7294),s=n(2152),o=n(4901),a=n(1498),l=n(7164),c=n(9560),u=function(e){function t(t){var n=t.options,r=t.context,i=t.result,s=t.setResult,a=e.call(this,n,r)||this;return a.runMutation=function(e){void 0===e&&(e={}),a.onMutationStart();var t=a.generateNewMutationId();return a.mutate(e).then((function(e){return a.onMutationCompleted(e,t),e})).catch((function(e){var n=a.getOptions().onError;if(a.onMutationError(e,t),n)return n(e),{data:void 0,errors:e};throw e}))},a.verifyDocumentType(n.mutation,o.n_.Mutation),a.result=i,a.setResult=s,a.mostRecentMutationId=0,a}return(0,r.ZT)(t,e),t.prototype.execute=function(e){return this.isMounted=!0,this.verifyDocumentType(this.getOptions().mutation,o.n_.Mutation),[this.runMutation,(0,r.pi)((0,r.pi)({},e),{client:this.refreshClient().client})]},t.prototype.afterExecute=function(){return this.isMounted=!0,this.unmount.bind(this)},t.prototype.cleanup=function(){},t.prototype.mutate=function(e){return this.refreshClient().client.mutate((0,c.J)(this.getOptions(),e))},t.prototype.onMutationStart=function(){this.result.loading||this.getOptions().ignoreResults||this.updateResult({loading:!0,error:void 0,data:void 0,called:!0})},t.prototype.onMutationCompleted=function(e,t){var n=this.getOptions(),r=n.onCompleted,i=n.ignoreResults,s=e.data,o=e.errors,l=o&&o.length>0?new a.c({graphQLErrors:o}):void 0;this.isMostRecentMutation(t)&&!i&&this.updateResult({called:!0,loading:!1,data:s,error:l}),r&&r(s)},t.prototype.onMutationError=function(e,t){this.isMostRecentMutation(t)&&this.updateResult({loading:!1,error:e,data:void 0,called:!0})},t.prototype.generateNewMutationId=function(){return++this.mostRecentMutationId},t.prototype.isMostRecentMutation=function(e){return this.mostRecentMutationId===e},t.prototype.updateResult=function(e){if(this.isMounted&&(!this.previousResult||!(0,s.D)(this.previousResult,e)))return this.setResult(e),this.previousResult=e,e},t}(l.V),d=n(4273);function h(e,t){var n=(0,i.useContext)((0,d.K)()),s=(0,i.useState)({called:!1,loading:!1}),o=s[0],a=s[1],l=t?(0,r.pi)((0,r.pi)({},t),{mutation:e}):{mutation:e},c=(0,i.useRef)();var h=(c.current||(c.current=new u({options:l,context:n,result:o,setResult:a})),c.current);return h.setOptions(l),h.context=n,(0,i.useEffect)((function(){return h.afterExecute()})),h.execute(o)}},8445:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(5893),i=(n(7294),n(9008)),s=n(1664),o=n(1163),a=function(){var e=(0,o.useRouter)();return(0,r.jsxs)("aside",{className:"bg-gray-800 sm:w-1/3 xl:w-1/5 sm:min-h-screen sm:block  p-5",children:[(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-white text-2xl font-black",children:"CRM Clientes"})}),(0,r.jsxs)("nav",{className:"mt-5 list-none",children:[(0,r.jsx)("li",{className:"/"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,r.jsx)(s.default,{href:"/",children:(0,r.jsx)("a",{className:"text-white block",children:"Clientes"})})}),(0,r.jsx)("li",{className:"/pedidos"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,r.jsx)(s.default,{href:"/pedidos",children:(0,r.jsx)("a",{className:"text-white block",children:"Pedidos"})})}),(0,r.jsx)("li",{className:"/productos"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,r.jsx)(s.default,{href:"/productos",children:(0,r.jsx)("a",{className:"text-white block",children:"Productos"})})})]}),(0,r.jsx)("div",{className:"sm:mt-10",children:(0,r.jsx)("p",{className:"text-white text-2xl font-black",children:"Gr\xe1ficas"})}),(0,r.jsxs)("nav",{className:"mt-5 list-none",children:[(0,r.jsx)("li",{className:"/mejoresvendedores"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,r.jsx)(s.default,{href:"/mejoresvendedores",children:(0,r.jsx)("a",{className:"text-white block",children:"Mejores Vendedores"})})}),(0,r.jsx)("li",{className:"/mejoresclientes"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,r.jsx)(s.default,{href:"/mejoresclientes",children:(0,r.jsx)("a",{className:"text-white block",children:"Mejores Clientes"})})})]})]})},l=n(168),c=n(5333),u=n(570);function d(){var e=(0,l.Z)(["\nquery obtenerUsuario {\n    obtenerUsuario {\n      nombre\n      apellido\n    }\n  }  \n"]);return d=function(){return e},e}var h=(0,c.Ps)(d()),m=function(){var e=(0,o.useRouter)(),t=(0,u.a)(h),n=t.data,i=t.loading;t.error;if(i)return"Cragando...";n||e.push("/login");var s=n.obtenerUsuario,a=s.nombre,l=s.apellido;return(0,r.jsxs)("div",{className:"sm:flex sm:justify-between mb-6",children:[(0,r.jsxs)("p",{className:"mr-2 mb-3 sm:mb-0",children:["Hola: ",a," ",l," "]}),(0,r.jsx)("button",{type:"button",className:"bg-blue-800 hover:bg-gray-800 font-bold uppercase text-xs rounded p-3 text-white shadow-md w-full sm:w-auto",onClick:function(){return localStorage.removeItem("token"),void e.push("/login")},children:"Cerrar Sesi\xf3n"})]})},p=function(e){var t=e.children,n=(0,o.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.default,{children:[(0,r.jsx)("title",{children:"Goomer CRM Administracion de Clientes"}),(0,r.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css",integrity:"sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"}),(0,r.jsx)("link",{href:"https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css",rel:"stylesheet"})]}),"/login"===n.pathname||"/nuevacuenta"===n.pathname?(0,r.jsx)("div",{className:"bg-gray-800 min-h-screen flex flex-col justify-center",children:t}):(0,r.jsx)("div",{className:"bg-gray-200 min-h-screen",children:(0,r.jsxs)("div",{className:"block sm:flex ",children:[(0,r.jsx)(a,{}),(0,r.jsxs)("main",{className:" sm:w-2/3 xl:w-4/5 sm:min-h-screen p-5",children:[(0,r.jsx)(m,{}),(0,r.jsx)("div",{className:"grid",children:t})]})]})})]})}},396:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(5893),i=n(168),s=(n(7294),n(8445)),o=n(5333),a=n(570),l=n(1163),c=n(7757),u=n.n(c),d=n(5861),h=n(1013),m=n(6455),p=n.n(m),f=n(5709);function x(){var e=(0,i.Z)(["\n    query obtenerClientesVendedor {\n        obtenerClientesVendedor {\n        id\n        nombre\n        apellido\n        empresa\n        email\n        }\n    }  \n"]);return x=function(){return e},e}function b(){var e=(0,i.Z)(["\nmutation EliminarClienteMutation($eliminarClienteId: ID!) {\n    eliminarCliente(id: $eliminarClienteId)\n  }  \n"]);return b=function(){return e},e}var v=(0,o.Ps)(b()),j=(0,o.Ps)(x()),y=function(e){var t=e.cliente,n=(0,f.D)(v,{update:function(e){var t=e.readQuery({query:j}).obtenerClientesVendedor;e.writeQuery({query:j,data:{obtenerClientesVendedor:t.filter((function(e){return e.id!==m}))}})}}),i=(0,h.Z)(n,1)[0],s=t.nombre,o=t.apellido,a=t.empresa,c=t.email,m=t.id;return(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"border px-4 py-2",children:[s," ",o]}),(0,r.jsxs)("td",{className:"border px-4 py-2",children:[a," "]}),(0,r.jsxs)("td",{className:"border px-4 py-2",children:[c," "]}),(0,r.jsx)("td",{className:"border px-4 py-2",children:(0,r.jsxs)("button",{type:"button",className:"flex justify-center items-center  bg-red-600 hover:bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold",onClick:function(){p().fire({title:"Deseas eliminar este cliente?",text:"Esta acci\xf3n no se puede deshacer!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"No, Cancelar"}).then(function(){var e=(0,d.Z)(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConfirmed){e.next=12;break}return e.prev=1,e.next=4,i({variables:{eliminarClienteId:m}});case 4:n=e.sent,r=n.data,p().fire("Eliminado!",r.eliminarCliente,"success"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())},children:["Eliminar",(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),(0,r.jsx)("td",{className:"border px-4 py-2",children:(0,r.jsxs)("button",{type:"button",className:"flex justify-center items-center  bg-green-600 hover:bg-green-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold",onClick:function(){l.default.push({pathname:"/editarcliente/[id]",query:{id:m}})},children:["Editar",(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})]})})]})},g=n(1664);function w(){var e=(0,i.Z)(["\n    query obtenerClientesVendedor {\n        obtenerClientesVendedor {\n        id\n        nombre\n        apellido\n        empresa\n        email\n        }\n    }  \n"]);return w=function(){return e},e}var N=(0,o.Ps)(w()),C=function(){var e=(0,l.useRouter)(),t=(0,a.a)(N),n=t.data,i=t.loading;t.error;return i?"Cargando...":n.obtenerClientesVendedor?(0,r.jsx)("div",{children:(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl text-gray-800 font-light",children:"Clientes"}),(0,r.jsx)(g.default,{href:"/nuevocliente",children:(0,r.jsx)("a",{className:"bg-blue-800 py-2 px-5 mt-5 inline-block text-white uppercase font-bold rounded text-sm hover:bg-gray-800 mb-3 text-center w-full md:w-auto",children:"Nuevo Cliente"})})]}),(0,r.jsx)("div",{className:"overflow-x-scroll",children:(0,r.jsxs)("table",{className:"table-auto shadoq-md mt-10 w-full w-lg",children:[(0,r.jsx)("thead",{className:"bg-gray-800",children:(0,r.jsxs)("tr",{className:"text-white",children:[(0,r.jsx)("th",{className:"w-1/5 py-2",children:"Nombre"}),(0,r.jsx)("th",{className:"w-1/5 py-2",children:"Empresa"}),(0,r.jsx)("th",{className:"w-1/5 py-2",children:"Email"}),(0,r.jsx)("th",{className:"w-1/5 py-2",children:"Eliminar"}),(0,r.jsx)("th",{className:"w-1/5 py-2",children:"Editar"})]})}),(0,r.jsx)("tbody",{className:"bg-white",children:n.obtenerClientesVendedor.map((function(e){return(0,r.jsx)(y,{cliente:e},e.id)}))})]})})]})}):e.push("/login")}},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(396)}])},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,l,"next",e)}function l(e){r(o,i,s,a,l,"throw",e)}a(void 0)}))}}n.d(t,{Z:function(){return i}})},1013:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,s=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},function(e){e.O(0,[26,455,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);