(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{8445:function(e,r,n){"use strict";n.d(r,{Z:function(){return p}});var l=n(5893),s=(n(7294),n(9008)),a=n(1664),t=n(1163),o=function(){var e=(0,t.useRouter)();return(0,l.jsxs)("aside",{className:"bg-gray-800 sm:w-1/3 xl:w-1/5 sm:min-h-screen sm:block  p-5",children:[(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"text-white text-2xl font-black",children:"CRM Clientes"})}),(0,l.jsxs)("nav",{className:"mt-5 list-none",children:[(0,l.jsx)("li",{className:"/"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,l.jsx)(a.default,{href:"/",children:(0,l.jsx)("a",{className:"text-white block",children:"Clientes"})})}),(0,l.jsx)("li",{className:"/pedidos"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,l.jsx)(a.default,{href:"/pedidos",children:(0,l.jsx)("a",{className:"text-white block",children:"Pedidos"})})}),(0,l.jsx)("li",{className:"/productos"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,l.jsx)(a.default,{href:"/productos",children:(0,l.jsx)("a",{className:"text-white block",children:"Productos"})})})]}),(0,l.jsx)("div",{className:"sm:mt-10",children:(0,l.jsx)("p",{className:"text-white text-2xl font-black",children:"Gr\xe1ficas"})}),(0,l.jsxs)("nav",{className:"mt-5 list-none",children:[(0,l.jsx)("li",{className:"/mejoresvendedores"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,l.jsx)(a.default,{href:"/mejoresvendedores",children:(0,l.jsx)("a",{className:"text-white block",children:"Mejores Vendedores"})})}),(0,l.jsx)("li",{className:"/mejoresclientes"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,l.jsx)(a.default,{href:"/mejoresclientes",children:(0,l.jsx)("a",{className:"text-white block",children:"Mejores Clientes"})})})]})]})},i=n(168),d=n(5333),c=n(570);function u(){var e=(0,i.Z)(["\nquery obtenerUsuario {\n    obtenerUsuario {\n      nombre\n      apellido\n    }\n  }  \n"]);return u=function(){return e},e}var m=(0,d.Ps)(u()),h=function(){var e=(0,t.useRouter)(),r=(0,c.a)(m),n=r.data,s=r.loading;r.error;if(s)return"Cragando...";n||e.push("/login");var a=n.obtenerUsuario,o=a.nombre,i=a.apellido;return(0,l.jsxs)("div",{className:"sm:flex sm:justify-between mb-6",children:[(0,l.jsxs)("p",{className:"mr-2 mb-3 sm:mb-0",children:["Hola: ",o," ",i," "]}),(0,l.jsx)("button",{type:"button",className:"bg-blue-800 hover:bg-gray-800 font-bold uppercase text-xs rounded p-3 text-white shadow-md w-full sm:w-auto",onClick:function(){return localStorage.removeItem("token"),void e.push("/login")},children:"Cerrar Sesi\xf3n"})]})},p=function(e){var r=e.children,n=(0,t.useRouter)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.default,{children:[(0,l.jsx)("title",{children:"Goomer CRM Administracion de Clientes"}),(0,l.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css",integrity:"sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"}),(0,l.jsx)("link",{href:"https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css",rel:"stylesheet"})]}),"/login"===n.pathname||"/nuevacuenta"===n.pathname?(0,l.jsx)("div",{className:"bg-gray-800 min-h-screen flex flex-col justify-center",children:r}):(0,l.jsx)("div",{className:"bg-gray-200 min-h-screen",children:(0,l.jsxs)("div",{className:"block sm:flex ",children:[(0,l.jsx)(o,{}),(0,l.jsxs)("main",{className:" sm:w-2/3 xl:w-4/5 sm:min-h-screen p-5",children:[(0,l.jsx)(h,{}),(0,l.jsx)("div",{className:"grid",children:r})]})]})})]})}},9438:function(e,r,n){"use strict";n.r(r);var l=n(5893),s=n(7757),a=n.n(s),t=n(5861),o=n(7337),i=n(1013),d=n(168),c=n(7294),u=n(8445),m=n(659),h=n(7561),p=n(5333),b=n(5709),x=n(1163);function f(){var e=(0,d.Z)(["\n    query obtenerClientesVendedor {\n        obtenerClientesVendedor {\n        id\n        nombre\n        apellido\n        empresa\n        email\n        }\n    }  \n"]);return f=function(){return e},e}function g(){var e=(0,d.Z)(["\nmutation nuevoCliente($nuevoClienteInput: ClienteInput) {\n    nuevoCliente(input: $nuevoClienteInput) {\n        telefono\n        email\n        empresa\n        apellido\n        nombre\n        id\n        }\n  }\n"]);return g=function(){return e},e}var j=(0,p.Ps)(g()),v=(0,p.Ps)(f());r.default=function(){var e=(0,x.useRouter)(),r=(0,c.useState)(null),n=r[0],s=r[1],d=(0,b.D)(j,{update:function(e,r){var n=r.data.nuevoCliente,l=e.readQuery({query:v}).obtenerClientesVendedor;e.writeQuery({query:v,data:{obtenerClientesVendedor:[].concat((0,o.Z)(l),[n])}})}}),p=(0,i.Z)(d,1)[0],f=(0,m.TA)({initialValues:{nombre:"",apellido:"",empresa:"",email:"",telefono:""},validationSchema:h.object({nombre:h.string().required("El nombre es obligatorio"),apellido:h.string().required("El nombre es obligatorio"),empresa:h.string().required("El nombre es obligatorio"),email:h.string().email("Introduce un email valido").required("El email es obligatorio")}),onSubmit:function(){var r=(0,t.Z)(a().mark((function r(n){var l,t,o,i,d,c;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=n.nombre,t=n.apellido,o=n.email,i=n.empresa,d=n.telefono,r.prev=1,r.next=4,p({variables:{nuevoClienteInput:{telefono:d,email:o,empresa:i,apellido:t,nombre:l}}});case 4:c=r.sent,c.data,e.push("/"),r.next=14;break;case 9:r.prev=9,r.t0=r.catch(1),console.log(r.t0),s(r.t0.message),setTimeout((function(){s(null)}),3e3);case 14:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()});return(0,l.jsxs)(u.Z,{children:[(0,l.jsx)("h1",{className:"text-2xl text-gray-800 font-light",children:"Nuevo Cliente"}),n&&(0,l.jsx)("div",{className:"font-bold bg-white py-2 px-3 w-full my-3 max-w-lg rounded text-center mx-auto",children:(0,l.jsxs)("p",{children:[n," "]})}),(0,l.jsx)("div",{className:"flex justify-center mt-5",children:(0,l.jsx)("div",{className:"w-full max-w-lg",children:(0,l.jsxs)("form",{onSubmit:f.handleSubmit,className:"bg-white rounded shadow-md px-8 pt-6 pb-8 mb-4",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"nombre",children:"Nombre"}),(0,l.jsx)("input",{className:" shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring",id:"nombre",type:"text",placeholder:"Nombre Cliente",onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.nombre})]}),f.touched.nombre&&f.errors.nombre?(0,l.jsxs)("div",{className:"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-2",children:[(0,l.jsx)("p",{className:"font-bold",children:"Error:"}),(0,l.jsxs)("p",{children:[f.errors.nombre," "]})]}):null,(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"apellido",children:"Apellido"}),(0,l.jsx)("input",{className:" shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring",id:"apellido",type:"text",placeholder:"Nombre Cliente",onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.apellido})]}),f.touched.apellido&&f.errors.apellido?(0,l.jsxs)("div",{className:"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-2",children:[(0,l.jsx)("p",{className:"font-bold",children:"Error:"}),(0,l.jsxs)("p",{children:[f.errors.apellido," "]})]}):null,(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"empresa",children:"Empresa"}),(0,l.jsx)("input",{className:" shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring",id:"empresa",type:"text",placeholder:"Empresa",onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.empresa})]}),f.touched.empresa&&f.errors.empresa?(0,l.jsxs)("div",{className:"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-2",children:[(0,l.jsx)("p",{className:"font-bold",children:"Error:"}),(0,l.jsxs)("p",{children:[f.errors.empresa," "]})]}):null,(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),(0,l.jsx)("input",{className:" shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring",id:"email",type:"email",placeholder:"Email Usuario",onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.email})]}),f.touched.email&&f.errors.email?(0,l.jsxs)("div",{className:"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-2",children:[(0,l.jsx)("p",{className:"font-bold",children:"Error:"}),(0,l.jsxs)("p",{children:[f.errors.email," "]})]}):null,(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"telefono",children:"Tel\xe9fono"}),(0,l.jsx)("input",{className:" shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring",id:"telefono",type:"tel",placeholder:"Tel\xe9fono",onChange:f.handleChange,onBlur:f.handleBlur,value:f.values.telefono})]}),f.touched.telefono&&f.errors.telefono?(0,l.jsxs)("div",{className:"my-2 bg-red-100 border-l-4 border-red-500 text-red-700 p-2",children:[(0,l.jsx)("p",{className:"font-bold",children:"Error:"}),(0,l.jsxs)("p",{children:[f.errors.telefono," "]})]}):null,(0,l.jsx)("input",{type:"submit",className:"bg-gray-800 w-full mt-5 p-2 text-white uppercase hover:bg-gray-900 cursor-pointer",value:"Nuevo Cliente"}),(0,l.jsx)("input",{onClick:function(){return e.push("/")},type:"button",className:"bg-gray-800 w-full mt-5 p-2 text-white uppercase hover:bg-gray-900 cursor-pointer",value:"Cancelar"})]})})})]})}},1601:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nuevocliente",function(){return n(9438)}])},7337:function(e,r,n){"use strict";n.d(r,{Z:function(){return a}});var l=n(907);var s=n(181);function a(e){return function(e){if(Array.isArray(e))return(0,l.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||(0,s.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[26,524,969,774,888,179],(function(){return r=1601,e(e.s=r);var r}));var r=e.O();_N_E=r}]);