(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{5709:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(3564),o=n(7294),s=n(2152),i=n(4901),a=n(1498),c=n(7164),u=n(9560),l=function(e){function t(t){var n=t.options,r=t.context,o=t.result,s=t.setResult,a=e.call(this,n,r)||this;return a.runMutation=function(e){void 0===e&&(e={}),a.onMutationStart();var t=a.generateNewMutationId();return a.mutate(e).then((function(e){return a.onMutationCompleted(e,t),e})).catch((function(e){var n=a.getOptions().onError;if(a.onMutationError(e,t),n)return n(e),{data:void 0,errors:e};throw e}))},a.verifyDocumentType(n.mutation,i.n_.Mutation),a.result=o,a.setResult=s,a.mostRecentMutationId=0,a}return(0,r.ZT)(t,e),t.prototype.execute=function(e){return this.isMounted=!0,this.verifyDocumentType(this.getOptions().mutation,i.n_.Mutation),[this.runMutation,(0,r.pi)((0,r.pi)({},e),{client:this.refreshClient().client})]},t.prototype.afterExecute=function(){return this.isMounted=!0,this.unmount.bind(this)},t.prototype.cleanup=function(){},t.prototype.mutate=function(e){return this.refreshClient().client.mutate((0,u.J)(this.getOptions(),e))},t.prototype.onMutationStart=function(){this.result.loading||this.getOptions().ignoreResults||this.updateResult({loading:!0,error:void 0,data:void 0,called:!0})},t.prototype.onMutationCompleted=function(e,t){var n=this.getOptions(),r=n.onCompleted,o=n.ignoreResults,s=e.data,i=e.errors,c=i&&i.length>0?new a.c({graphQLErrors:i}):void 0;this.isMostRecentMutation(t)&&!o&&this.updateResult({called:!0,loading:!1,data:s,error:c}),r&&r(s)},t.prototype.onMutationError=function(e,t){this.isMostRecentMutation(t)&&this.updateResult({loading:!1,error:e,data:void 0,called:!0})},t.prototype.generateNewMutationId=function(){return++this.mostRecentMutationId},t.prototype.isMostRecentMutation=function(e){return this.mostRecentMutationId===e},t.prototype.updateResult=function(e){if(this.isMounted&&(!this.previousResult||!(0,s.D)(this.previousResult,e)))return this.setResult(e),this.previousResult=e,e},t}(c.V),d=n(4273);function h(e,t){var n=(0,o.useContext)((0,d.K)()),s=(0,o.useState)({called:!1,loading:!1}),i=s[0],a=s[1],c=t?(0,r.pi)((0,r.pi)({},t),{mutation:e}):{mutation:e},u=(0,o.useRef)();var h=(u.current||(u.current=new l({options:c,context:n,result:i,setResult:a})),u.current);return h.setOptions(c),h.context=n,(0,o.useEffect)((function(){return h.afterExecute()})),h.execute(i)}},8445:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(5893),o=(n(7294),n(9008)),s=n(1664),i=n(1163),a=function(){var e=(0,i.useRouter)();return(0,r.jsxs)("aside",{className:"bg-gray-800 sm:w-1/3 xl:w-1/5 sm:min-h-screen sm:block  p-5",children:[(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-white text-2xl font-black",children:"CRM Clientes"})}),(0,r.jsxs)("nav",{className:"mt-5 list-none",children:[(0,r.jsx)("li",{className:"/"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,r.jsx)(s.default,{href:"/",children:(0,r.jsx)("a",{className:"text-white block",children:"Clientes"})})}),(0,r.jsx)("li",{className:"/pedidos"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,r.jsx)(s.default,{href:"/pedidos",children:(0,r.jsx)("a",{className:"text-white block",children:"Pedidos"})})}),(0,r.jsx)("li",{className:"/productos"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,r.jsx)(s.default,{href:"/productos",children:(0,r.jsx)("a",{className:"text-white block",children:"Productos"})})})]}),(0,r.jsx)("div",{className:"sm:mt-10",children:(0,r.jsx)("p",{className:"text-white text-2xl font-black",children:"Gr\xe1ficas"})}),(0,r.jsxs)("nav",{className:"mt-5 list-none",children:[(0,r.jsx)("li",{className:"/mejoresvendedores"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,r.jsx)(s.default,{href:"/mejoresvendedores",children:(0,r.jsx)("a",{className:"text-white block",children:"Mejores Vendedores"})})}),(0,r.jsx)("li",{className:"/mejoresclientes"===e.pathname?"bg-blue-800 border-b-2 border-gray-200 p-2":"p-2",children:(0,r.jsx)(s.default,{href:"/mejoresclientes",children:(0,r.jsx)("a",{className:"text-white block",children:"Mejores Clientes"})})})]})]})},c=n(168),u=n(5333),l=n(570);function d(){var e=(0,c.Z)(["\nquery obtenerUsuario {\n    obtenerUsuario {\n      nombre\n      apellido\n    }\n  }  \n"]);return d=function(){return e},e}var h=(0,u.Ps)(d()),m=function(){var e=(0,i.useRouter)(),t=(0,l.a)(h),n=t.data,o=t.loading;t.error;if(o)return"Cragando...";n||e.push("/login");var s=n.obtenerUsuario,a=s.nombre,c=s.apellido;return(0,r.jsxs)("div",{className:"sm:flex sm:justify-between mb-6",children:[(0,r.jsxs)("p",{className:"mr-2 mb-3 sm:mb-0",children:["Hola: ",a," ",c," "]}),(0,r.jsx)("button",{type:"button",className:"bg-blue-800 hover:bg-gray-800 font-bold uppercase text-xs rounded p-3 text-white shadow-md w-full sm:w-auto",onClick:function(){return localStorage.removeItem("token"),void e.push("/login")},children:"Cerrar Sesi\xf3n"})]})},p=function(e){var t=e.children,n=(0,i.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o.default,{children:[(0,r.jsx)("title",{children:"Goomer CRM Administracion de Clientes"}),(0,r.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css",integrity:"sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==",crossOrigin:"anonymous",referrerPolicy:"no-referrer"}),(0,r.jsx)("link",{href:"https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css",rel:"stylesheet"})]}),"/login"===n.pathname||"/nuevacuenta"===n.pathname?(0,r.jsx)("div",{className:"bg-gray-800 min-h-screen flex flex-col justify-center",children:t}):(0,r.jsx)("div",{className:"bg-gray-200 min-h-screen",children:(0,r.jsxs)("div",{className:"block sm:flex ",children:[(0,r.jsx)(a,{}),(0,r.jsxs)("main",{className:" sm:w-2/3 xl:w-4/5 sm:min-h-screen p-5",children:[(0,r.jsx)(m,{}),(0,r.jsx)("div",{className:"grid",children:t})]})]})})]})}},1612:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(5893),o=n(168),s=(n(7294),n(8445)),i=n(5333),a=n(570),c=n(1163),u=n(7757),l=n.n(u),d=n(5861),h=n(1013),m=n(6455),p=n.n(m),f=n(5709);function x(){var e=(0,o.Z)(["\nquery obtenerProductos {\n    obtenerProductos {\n      nombre\n      existencia\n      precio\n      id\n    }\n  }\n"]);return x=function(){return e},e}function b(){var e=(0,o.Z)(["\nmutation EliminarProductoMutation($eliminarProductoId: ID!) {\n    eliminarProducto(id: $eliminarProductoId)\n  }\n"]);return b=function(){return e},e}var v=(0,i.Ps)(b()),j=(0,i.Ps)(x()),y=function(e){var t=e.producto,n=(0,f.D)(v,{update:function(e){var t=e.readQuery({query:j}).obtenerProductos;e.writeQuery({query:j,data:{obtenerProductos:t.filter((function(e){return e.id!==u}))}})}}),o=(0,h.Z)(n,1)[0],s=t.nombre,i=t.existencia,a=t.precio,u=t.id;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border px-4 py-2",children:s}),(0,r.jsxs)("td",{className:"border px-4 py-2 text-center",children:[i," "]}),(0,r.jsxs)("td",{className:"border px-4 py-2 text-center",children:[a," \u20ac"]}),(0,r.jsx)("td",{className:"border px-4 py-2",children:(0,r.jsxs)("button",{type:"button",className:"flex justify-center items-center  bg-red-600 hover:bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold",onClick:function(){p().fire({title:"Deseas eliminar este producto?",text:"Esta acci\xf3n no se puede deshacer!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminar!",cancelButtonText:"No, Cancelar"}).then(function(){var e=(0,d.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isConfirmed){e.next=12;break}return e.prev=1,e.next=4,o({variables:{eliminarProductoId:u}});case 4:n=e.sent,r=n.data,p().fire("Eliminado!",r.eliminarProducto,"success"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())},children:["Eliminar",(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),(0,r.jsx)("td",{className:"border px-4 py-2",children:(0,r.jsxs)("button",{type:"button",className:"flex justify-center items-center  bg-green-600 hover:bg-green-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold",onClick:function(){c.default.push({pathname:"/editarproducto/[id]",query:{id:u}})},children:["Editar",(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})]})})]})},g=n(1664);function w(){var e=(0,o.Z)(["\nquery obtenerProductos {\n    obtenerProductos {\n      nombre\n      existencia\n      precio\n      id\n    }\n  }\n"]);return w=function(){return e},e}var N=(0,i.Ps)(w()),k=function(){var e=(0,c.useRouter)(),t=(0,a.a)(N),n=t.data,o=t.loading;t.error;return o?"Cargando...":(n.obtenerProductos||e.push("/login"),(0,r.jsx)("div",{children:(0,r.jsxs)(s.Z,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl text-gray-800 font-light",children:"Productos"}),(0,r.jsx)(g.default,{href:"/nuevoproducto",children:(0,r.jsx)("a",{className:"w-full md:w-auto text-center bg-blue-800 py-2 px-5 mt-5 inline-block text-white uppercase font-bold rounded text-sm hover:bg-gray-800 mb-3",children:"Nuevo Producto"})})]}),(0,r.jsx)("div",{className:"overflow-x-scroll",children:(0,r.jsxs)("table",{className:"table-auto shadoq-md mt-10 w-full w-lg",children:[(0,r.jsx)("thead",{className:"bg-gray-800",children:(0,r.jsxs)("tr",{className:"text-white",children:[(0,r.jsx)("th",{className:"w-1/5 py-2",children:"Nombre"}),(0,r.jsx)("th",{className:"w-1/5 py-2",children:"Existencias"}),(0,r.jsx)("th",{className:"w-1/5 py-2",children:"Precio"}),(0,r.jsx)("th",{className:"w-1/5 py-2",children:"Eliminar"}),(0,r.jsx)("th",{className:"w-1/5 py-2",children:"Editar"})]})}),(0,r.jsx)("tbody",{className:"bg-white",children:n.obtenerProductos.map((function(e){return(0,r.jsx)(y,{producto:e},e.id)}))})]})})]})}))}},971:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/productos",function(){return n(1612)}])},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,o,s,i){try{var a=e[s](i),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,s){var i=e.apply(t,n);function a(e){r(i,o,s,a,c,"next",e)}function c(e){r(i,o,s,a,c,"throw",e)}a(void 0)}))}}n.d(t,{Z:function(){return o}})},1013:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(181);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,s=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw s}}return n}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);function o(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},function(e){e.O(0,[26,455,774,888,179],(function(){return t=971,e(e.s=t);var t}));var t=e.O();_N_E=t}]);